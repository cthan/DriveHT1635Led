"File: IIC.c         Assembler  Version HGASM0202      Page 1


   1  0000              ; Generated by holtek-gcc v3.12, Tue May 19 19:20:29 2015
   2  0000              ; 
   3  0000              ; Configuration:
   4  0000              ;       without long instruction
   5  0000              ;       Single ROM, Multi-RAM
   6  0000              ;       bits_per_rom_unit:15
   7  0000              ;       with mp1
   8  0000              ;       with tbhp, address(0x9)
   9  0000              ;          Use ret-const
  10  0000              ;       
  11  0000              ;       
  12  0000              ; use 'tabrdc' instead of 'tabrd'
  13  0000              ;       
  14  0000              
  15  0000              #pragma translator "holtek-gcc 4.6.4" "3.12" "build 20130711"
  16  0000              ; Rebuild 113
  17  0000              
  18  0000              ir equ [2]
  19  0000              mp equ [3]
  20  0000              sbp equ [7]
  21  0000              acc equ [5]
  22  0000              bp equ [4]
  23  0000              status equ [10]
  24  0000              c equ [10].0
  25  0000              ac equ [10].1
  26  0000              z equ [10].2
  27  0000              ov equ [10].3
  28  0000              intc equ [11]
  29  0000              
  30  0000              extern ra:byte
  31  0000              extern rb:byte
  32  0000              extern rc:byte
  33  0000              extern rd:byte
  34  0000              extern re:byte
  35  0000              extern rf:byte
  36  0000              extern rg:byte
  37  0000              extern rh:byte
  38  0000              extern _Crom2Prom:near
  39  0000              extern _Crom2PromNext:near
  40  0000              
  41  0000              RAMBANK 0 @HCCINIT, @HCCINIT0
  42  0000              @HCCINIT	.section 'data'
  43  0000              @HCCINIT0	.section 'data'
  44  0000              
  45  0000              #pragma debug scope 1 1
  46  0000              	extern __DELAY3:near
  47  0000              	extern __DELAYX3:near
  48  0000              	extern __DELAYX6:near
  49  0000              	extern __DELAYY5:near
  50  0000              	extern __DELAYY3:near
  51  0000              	extern _builtin_holtek_delay_2:byte
  52  0000              public __delay
  53  0000              #pragma debug scope 2 1

 149  0000              #line 149 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 149  0000              __delay .section 'code'
 149  0000              __delay proc
 150  0000              #line 150 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 150  0000              ;# 150 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c" 1
"File: IIC.c         Assembler  Version HGASM0202      Page 2

 150  0000  0000        	nop
 151  0001              #line 151 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 151  0001              ;# 151 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c" 1
 151  0001  0000        	nop
 152  0002              #line 152 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 152  0002              ;# 152 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c" 1
 152  0002  0000        	nop
 153  0003              #line 153 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 153  0003              ;# 153 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c" 1
 153  0003  0000        	nop
 154  0004              #line 154 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 154  0004              ;# 154 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c" 1
 154  0004  0000        	nop
 154  0005  0003        	ret
 154  0006              __delay endp
 154  0006              #line 154 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 154  0006              #pragma debug scope 1 1
 154  0006              public _iicStart
 154  0006              #pragma debug scope 3 1
  46  0006              #line 46 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  46  0000              _iicStart .section 'code'
  46  0000              _iicStart proc
  47  0000              #line 47 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  47  0000  371B        	clr [27].6
  48  0001              #line 48 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  48  0001  379B        	clr [27].7
  49  0002              #line 49 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  49  0002  331A        	set [26].6
  49  0003  2000     R  	call __delay
  50  0004              #line 50 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  50  0004  339A        	set [26].7
  50  0005  2000     R  	call __delay
  51  0006              #line 51 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  51  0006  371A        	clr [26].6
  51  0007  2000     R  	call __delay
  52  0008              #line 52 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  52  0008  379A        	clr [26].7
  52  0009  2000     R  	call __delay
  52  000A  0003        	ret
  52  000B              _iicStart endp
  52  000B              #line 52 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  52  000B              #pragma debug scope 1 1
  52  000B              public _iicStop
  52  000B              #pragma debug scope 4 1
  59  000B              #line 59 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  59  0000              _iicStop .section 'code'
  59  0000              _iicStop proc
  60  0000              #line 60 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  60  0000  371B        	clr [27].6
  61  0001              #line 61 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  61  0001  371A        	clr [26].6
  61  0002  2000     R  	call __delay
  62  0003              #line 62 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  62  0003  339A        	set [26].7
  62  0004  2000     R  	call __delay
  63  0005              #line 63 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  63  0005  331A        	set [26].6
  63  0006  2000     R  	call __delay
  64  0007              #line 64 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  64  0007  379A        	clr [26].7
"File: IIC.c         Assembler  Version HGASM0202      Page 3

  64  0008  2000     R  	call __delay
  64  0009  0003        	ret
  64  000A              _iicStop endp
  64  000A              #line 64 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  64  000A              #pragma debug scope 1 1
  64  000A              public _Ack
  64  000A              #pragma debug scope 5 1
  71  000A              #line 71 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  71  0000              _Ack .section 'code'
  71  0000              _Ack proc
  72  0000              #line 72 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  72  0000  371B        	clr [27].6
  73  0001              #line 73 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  73  0001  371A        	clr [26].6
  73  0002  2000     R  	call __delay
  74  0003              #line 74 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  74  0003  339A        	set [26].7
  74  0004  2000     R  	call __delay
  75  0005              #line 75 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  75  0005  379A        	clr [26].7
  75  0006  2000     R  	call __delay
  76  0007              #line 76 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  76  0007  331A        	set [26].6
  76  0008  2000     R  	call __delay
  76  0009  0003        	ret
  76  000A              _Ack endp
  76  000A              #line 76 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  76  000A              #pragma debug scope 1 1
  76  000A              public _NoAck
  76  000A              #pragma debug scope 6 1
  82  000A              #line 82 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  82  0000              _NoAck .section 'code'
  82  0000              _NoAck proc
  83  0000              #line 83 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  83  0000  371B        	clr [27].6
  84  0001              #line 84 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  84  0001  331A        	set [26].6
  84  0002  2000     R  	call __delay
  85  0003              #line 85 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  85  0003  339A        	set [26].7
  85  0004  2000     R  	call __delay
  86  0005              #line 86 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  86  0005  379A        	clr [26].7
  86  0006  2000     R  	call __delay
  86  0007  0003        	ret
  86  0008              _NoAck endp
  86  0008              #line 86 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  86  0008              #pragma debug scope 1 1
  86  0008              public _TestAck
  86  0008              #pragma debug scope 7 1
  93  0008              #line 93 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  93  0000              _TestAck .section 'code'
  93  0000              _TestAck proc
  93  0000  0002[           local _TestAck_2 db 2 dup(?)	; 0,2
            00
            ]
  93  0002              #pragma debug variable 8 7 _TestAck_2+0 "ErrTime"
  94  0000              #line 94 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  94  0000  1F00     R  	clr _TestAck_2[0]
  95  0001              #line 95 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
"File: IIC.c         Assembler  Version HGASM0202      Page 4

  95  0001  331B        	set [27].6
  95  0002  2000     R  	call __delay
  96  0003              #line 96 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  96  0003  339A        	set [26].7
  96  0004  2000     R  	call __delay
  96  0005              _L7:
  97  0005              #line 97 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  97  0005  071A        	mov a,[26]
  97  0006  0E40        	and a,64
  97  0007  0080     R  	mov _TestAck_2[1],a
  97  0008  1080     R  	sz _TestAck_2[1]
  97  0009  2800     R  	jmp _LI1
  97  000A  2800     R  	jmp _L12
  97  000B              _LI1:
  98  000B              #line 98 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  98  000B  1480     R  	inc _TestAck_2[0]
  99  000C              #line 99 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  99  000C  0FFA        	mov a,250
  99  000D  0200     R  	sub a,_TestAck_2[0]
  99  000E  3C0A        	sz c
  99  000F  2800     R  	jmp _L7
 100  0010              #line 100 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 100  0010  0F01        	mov a,1
 100  0011  0080     R  	mov _TestAck_2[1],a
 100  0012  2800     R  	jmp _L8
 100  0013              _L12:
 103  0013              #line 103 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 103  0013  379A        	clr [26].7
 103  0014  2000     R  	call __delay
 103  0015              _L8:
 105  0015              #line 105 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 105  0015  0700     R  	mov a,_TestAck_2[1]
 105  0016  0003        	ret
 105  0017              _TestAck endp
 105  0017              #line 105 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 105  0017              #pragma debug scope 1 1
 105  0017              public _iicWrite
 105  0017              #pragma debug scope 8 1
 110  0017              #line 110 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 110  0000              _iicWrite .section 'code'
 110  0000              _iicWrite proc
 110  0000  0002[           local _iicWrite_2 db 2 dup(?)	; 0,2
            00
            ]
 110  0000  0080     R  	mov _iicWrite_2[1],a
 110  0001              #pragma debug variable 8 8 _iicWrite_2+1 "Data"
 110  0001              #pragma debug variable 8 8 _iicWrite_2+0 "count"
 111  0001              #line 111 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 111  0001  0F08        	mov a,8
 111  0002  0080     R  	mov _iicWrite_2[0],a
 112  0003              #line 112 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 112  0003  371B        	clr [27].6
 113  0004              #line 113 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 113  0004  2800     R  	jmp _L14
 113  0005              _L17:
 120  0005              #line 120 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 120  0005  3C00     R  	sz _iicWrite_2[1].7
 120  0006  2800     R  	jmp _L15
 121  0007              #line 121 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 121  0007  371A        	clr [26].6
"File: IIC.c         Assembler  Version HGASM0202      Page 5

 121  0008  2800     R  	jmp _L16
 121  0009              _L15:
 124  0009              #line 124 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 124  0009  331A        	set [26].6
 124  000A              _L16:
 126  000A              #line 126 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 126  000A  2000     R  	call __delay
 127  000B              #line 127 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 127  000B  339A        	set [26].7
 127  000C  2000     R  	call __delay
 128  000D              #line 128 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 128  000D  379A        	clr [26].7
 128  000E  2000     R  	call __delay
 129  000F              #line 129 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 129  000F  0700     R  	mov a,_iicWrite_2[1]
 129  0010  0380     R  	addm a,_iicWrite_2[1]
 129  0011              _L14:
 113  0011              #line 113 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 113  0011  0700     R  	mov a,_iicWrite_2[0]
 113  0012  0080     E  	mov ra,a
 113  0013  1500     E  	deca ra
 113  0014  0080     R  	mov _iicWrite_2[0],a
 113  0015  1080     E  	sz ra
 113  0016  2800     R  	jmp _L17
 113  0017  0003        	ret
 113  0018              _iicWrite endp
 113  0018              #line 113 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 113  0018              #pragma debug scope 1 1
 113  0018              public _iicSendCommand
 113  0018              #pragma debug scope 9 1
  22  0018              #line 22 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  22  0000              _iicSendCommand .section 'code'
  22  0000              _iicSendCommand proc
  22  0000              public _iicSendCommand_2
  22  0000  0003[           local _iicSendCommand_2 db 3 dup(?)	; 2,1
            00
            ]
  22  0000  0080     R  	mov _iicSendCommand_2[2],a
  22  0001              #pragma debug variable 8 9 _iicSendCommand_2+2 "address"
  22  0001              #pragma debug variable 8 9 _iicSendCommand_2+0 "command"
  22  0001              #pragma debug variable 8 9 _iicSendCommand_2+1 "commandData"
  23  0001              #line 23 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  23  0001  2000     R  	call _iicStart
  24  0002              #line 24 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  24  0002  0700     R  	mov a,_iicSendCommand_2[2]
  24  0003  2000     R  	call _iicWrite
  25  0004              #line 25 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  25  0004  2000     R  	call _TestAck
  25  0005  0080     E  	mov ra,a
  25  0006  1700     E  	sdza ra
  25  0007  2800     R  	jmp _L19
  25  0008              _L20:
  26  0008              #line 26 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  26  0008  2000     R  	call _iicStop
  26  0009  2800     R  	jmp _L25
  26  000A              _L19:
  29  000A              #line 29 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  29  000A  0700     R  	mov a,_iicSendCommand_2[0]
  29  000B  2000     R  	call _iicWrite
  30  000C              #line 30 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
"File: IIC.c         Assembler  Version HGASM0202      Page 6

  30  000C  2000     R  	call _TestAck
  30  000D  0080     E  	mov ra,a
  30  000E  1700     E  	sdza ra
  30  000F  2800     R  	jmp _LI2
  30  0010  2800     R  	jmp _L20
  30  0011              _LI2:
  34  0011              #line 34 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  34  0011  0700     R  	mov a,_iicSendCommand_2[1]
  34  0012  0080     E  	mov ra,a
  34  0013  0700     E  	mov a,ra
  34  0014  2000     R  	call _iicWrite
  35  0015              #line 35 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  35  0015  2000     R  	call _TestAck
  35  0016  2800     R  	jmp _L20
  35  0017              _L25:
  35  0017  0003        	ret
  35  0018              _iicSendCommand endp
  35  0018              #line 35 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
  35  0018              #pragma debug scope 1 1
  35  0018              public _iicRead
  35  0018              #pragma debug scope 10 1
 137  0018              #line 137 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 137  0000              _iicRead .section 'code'
 137  0000              _iicRead proc
 137  0000  0002[           local _iicRead_2 db 2 dup(?)	; 0,2
            00
            ]
 137  0002              #pragma debug variable 8 10 _iicRead_2+1 "count"
 137  0002              #pragma debug variable 8 10 _iicRead_2+0 "Data"
 138  0000              #line 138 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 138  0000  0F08        	mov a,8
 138  0001  0080     R  	mov _iicRead_2[1],a
 138  0002  1F00     R  	clr _iicRead_2[0]
 139  0003              #line 139 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 139  0003  331B        	set [27].6
 139  0004              _L27:
 140  0004              #line 140 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 140  0004  0700     R  	mov a,_iicRead_2[1]
 140  0005  0080     E  	mov ra,a
 140  0006  1500     E  	deca ra
 140  0007  0080     R  	mov _iicRead_2[1],a
 140  0008  1080     E  	sz ra
 140  0009  2800     R  	jmp _LI3
 140  000A  2800     R  	jmp _L29
 140  000B              _LI3:
 142  000B              #line 142 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 142  000B  339A        	set [26].7
 142  000C  2000     R  	call __delay
 143  000D              #line 143 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 143  000D  0700     R  	mov a,_iicRead_2[0]
 143  000E  0380     R  	addm a,_iicRead_2[0]
 144  000F              #line 144 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 144  000F  1F00     E  	clr ra
 144  0010  3F1A        	sz [26].6
 144  0011  1480     E  	inc ra
 144  0012  0700     E  	mov a,ra
 144  0013  0580     R  	orm a,_iicRead_2[0]
 145  0014              #line 145 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 145  0014  379A        	clr [26].7
 145  0015  2800     R  	jmp _L27
"File: IIC.c         Assembler  Version HGASM0202      Page 7

 145  0016              _L29:
 147  0016              #line 147 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 147  0016  0700     R  	mov a,_iicRead_2[0]
 147  0017  0080     E  	mov ra,a
 148  0018              #line 148 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 148  0018  0700     E  	mov a,ra
 148  0019  0003        	ret
 148  001A              _iicRead endp
 148  001A              #line 148 "E:\Doing\啟德電子\DriveHT1635Led\source\IIC.c"
 148  001A              #pragma debug scope 1 1
 148  001A              ___pa equ [01ah]
 148  001A              #pragma debug struct_end
 148  001A              #pragma debug struct_end
 148  001A              #pragma debug union_end
 148  001A              #pragma debug union_end
 148  001A              #pragma debug variable 43 1 [01ah] "__pa" 1
 148  001A              ___pac equ [01bh]
 148  001A              #pragma debug struct_end
 148  001A              #pragma debug struct_end
 148  001A              #pragma debug union_end
 148  001A              #pragma debug union_end
 148  001A              #pragma debug variable 45 1 [01bh] "__pac" 1
 148  001A              IFDEF ISR_SYSTEM_STACK_BEFORE_2014_12_23
 148  001A              ELSE
 148  001A              ENDIF
 148  001A              
 148  001A              ; 
 148  001A              ; Generated by holtek-gcc v3.12, Tue May 19 19:20:29 2015
 148  001A              ; Rebuild 113
 148  001A              ; end of file


        0 Errors, 0